<span class="lang">
<span class="lang-ja">
<p>配点： <var>100</var> 点</p>

<div class="part">
<section>
<h3>問題</h3>
<p>あなたはパスタが大好物であり，毎日，晩御飯にパスタを作って食べている．あなたはトマトソース，クリームソース，バジルソースの <var>3</var> 種類のパスタを作ることができる．</p>
<p><var>N</var> 日間の晩御飯の予定を考えることにした．それぞれの日に <var>3</var> 種類のパスタから <var>1</var> 種類を選ぶ．ただし，同じパスタが続くと飽きてしまうので，<var>3</var> 日以上連続して同じパスタを選んではいけない．また，<var>N</var> 日のうちの <var>K</var> 日分のパスタはすでに決めてある．</p>
<p>入力として <var>N</var> の値と，<var>K</var> 日分のパスタの情報が与えられたとき，条件をみたす予定が何通りあるかを <var>10\,000</var> で割った余りを求めるプログラムを作成せよ．</p>
<hr />
</section>
</div>

<div class="io-style">
<div class="part">
<section>
<h3>入力</h3>
<p>入力は <var>K + 1</var> 行からなる．</p>
<p><var>1</var> 行目には <var>2</var> つの整数 <var>N, K</var> (<var>3 \leqq N \leqq 100</var>，<var>1 \leqq K \leqq N</var>) が空白を区切りとして書かれている．</p>
<p><var>1 + i</var> 行目 (<var>1 \leqq i \leqq K</var>) には <var>2</var> つの整数 <var>A_i, B_i</var> (<var>1 \leqq A_i \leqq N</var>，<var>1 \leqq B_i \leqq 3</var>) が空白を区切りとして書かれている．これは，<var>A_i</var> 日目のパスタはすでに決まっており，<var>B_i = 1</var> のときはトマトソースであり，<var>B_i = 2</var> のときはクリームソースであり，<var>B_i = 3</var> のときはバジルソースであることを表す．<var>A_i</var> (<var>1 \leqq i \leqq K</var>) は全て異なる．与えられる入力データにおいて，条件をみたす予定は <var>1</var> 通り以上あることが保証されている．</p>
</section>
</div>
</div>

<div class="io-style">
<div class="part">
<section>
<h3>出力</h3>
<p>条件をみたす予定が何通りあるかを <var>10\,000</var> で割った余りを <var>1</var> 行で出力せよ．</p>
<hr />
</section>
</div>
</div>

<div class="part">
<section>
<h3>入力例 1</h3>
<pre>5 3
3 1
1 1
4 2
</pre>
</section>
</div>

<div class="part">
<section>
<h3>出力例 1</h3>
<pre>6
</pre>
<p>入出力例 <var>1</var> において，あなたは <var>5</var> 日間の予定を考える．<var>1</var> 日目と <var>3</var> 日目はトマトソースであり，<var>4</var> 日目はクリームソースである．また，<var>3</var> 日以上連続して同じパスタを選んではいけない．これらの条件をみたす予定は <var>6</var> 通りある．</p>
<p><img alt="" src="https://img.atcoder.jp/joi2012yo/2012-yo-t4-fig01.png" /></p>
<p>この表では，<var>1</var> はトマトソースを，<var>2</var> はクリームソースを，<var>3</var> はバジルソースを表す．</p>
<hr />
</section>
</div>

<div class="part">
<section>
<h3>入力例 2</h3>
<pre>20 5
10 2
4 3
12 1
13 2
9 1
</pre>
</section>
</div>

<div class="part">
<section>
<h3>出力例 2</h3>
<pre>2640
</pre>
<p>入出力例 <var>2</var> において，条件をみたす予定は全部で <var>4\,112\,640</var> 通りある．それを <var>10\,000</var> で割った余りである <var>2\,640</var> を出力する．</p></section>
</div>
</span>
</span>
